---
# ClusterFederatedTrustDomain for Cluster 1 (test01) - Configure trust to Cluster 2 (test02)
apiVersion: spire.spiffe.io/v1alpha1
kind: ClusterFederatedTrustDomain
metadata:
  name: test02-federation
  labels:
    app.kubernetes.io/managed-by: zero-trust-workload-identity-manager
spec:
  # Trust domain of the remote cluster (test02)
  trustDomain: apps.aagnihot-cluster-fdk.devcluster.openshift.com
  
  # URL of the remote cluster's federation bundle endpoint
  bundleEndpointURL: https://spire-federation-test02.apps.aagnihot-cluster-fdk.devcluster.openshift.com
  
  # Bundle endpoint profile configuration
  bundleEndpointProfile:
    type: https_spiffe
    # Expected SPIFFE ID of the remote SPIRE server
    endpointSPIFFEID: spiffe://apps.aagnihot-cluster-fdk.devcluster.openshift.com/spire/server
  
  # Ensure this matches the controller class name
  className: zero-trust-workload-identity-manager-spire

